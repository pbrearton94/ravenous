(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[108],{babB:function(e,t,r){"use strict";var s=r("QHjb"),a=r("lREb"),c=r("q1tI"),n=r.n(c),o=r("/MKj"),i=r("swBZ"),p=r("5JLQ"),l=r("lOB8"),d=r("rePB"),b=r("QkVN"),u=r.n(b);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){Object(d.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const normalizeChecklist=(e,t)=>e.flatMap((e=>e.tasks)).reduce(((e,{task_key:r})=>_objectSpread(_objectSpread({},e),{},{[r]:Boolean(t[r]&&"false"!==t[r])})),{});var h=r("CWAm"),j=r("wE9P"),O=r("p7af"),k=r("84j9"),m=r("YA6q"),_=r("jhD/"),f=r("2oex"),y=r("KTzr");function handleProjectProgressUpdates_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function handleProjectProgressUpdates_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?handleProjectProgressUpdates_ownKeys(Object(r),!0).forEach((function(t){Object(d.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):handleProjectProgressUpdates_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function project_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function project_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?project_ownKeys(Object(r),!0).forEach((function(t){Object(d.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):project_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const updateProjectTaskProgress=(e,t,r)=>async(s,a)=>{const c=Object(j.a)(a(),{id:e.id});if("project"===c.type){const a=e.projectInformation.self_assessments.reduce(((e,s)=>u()(e,s.tasks.reduce(((e,{task_key:s})=>{const a=s===t?r:c.checklist[s],n="true"===a||!0===a;return u()(e,{[s]:n})}),{}))),{}),n=Object.values(a),o=n.filter((e=>e)).length===n.length,i=project_objectSpread(project_objectSpread({},c),{},{content_item_id:e.id,checklist:a,completed:o});s(Object(h.h)({data:{project:e.slug,self_assessment:t,submit_type:"project_checklist_submit"}})),o&&s(Object(h.b)()),s(Object(O.b)(i)),s(((e,t)=>async(r,s)=>{const a=Object(f.h)(s()),c=a.track_id,n=await Object(m.a)({method:"POST",endpoint:"/practice/update_project_progress",data:handleProjectProgressUpdates_objectSpread({project_id:e,track_id:c,tasks:t,utc_offset:Object(k.c)()},Object(_.a)(a))});await n.json(),r(Object(y.a)())})(e.id,a))}},startProject=e=>async t=>{t(Object(O.b)({content_item_id:e.id,started:!0})),t((e=>async(t,r)=>{const s=Object(f.h)(r()),a=s.track_id,c=await Object(m.a)({method:"POST",endpoint:"/practice/start_project",data:handleProjectProgressUpdates_objectSpread({project_id:e,track_id:a,utc_offset:Object(k.c)()},Object(_.a)(s))});await c.json(),t(Object(y.a)())})(e.id))};var g=r("2Y9M"),w=r("doSx"),P=r("hsD4"),E=r("/VKx"),v=r("TSYQ"),T=r.n(v),D=r("OoWH"),S="body__1puO-PnHFWpw0UyjbWF1No",C="item__2f2y_7I5rfWJ_TLZSmhALb",x="centeredCheckbox__2QQhtR9gO-52xrQs_8ZEjS",B="narrativeMarkdown__1UywfcBd-60XKky6qUHIYA",I="scrollable___DFOWZAyFa-jr7fZML66U",K=r("kVzq");class TaskCheckBox_TaskCheckBox extends n.a.PureComponent{constructor(...e){super(...e),Object(d.a)(this,"onKeyDown",(e=>{13!==e.which&&32!==e.which||(this.props.onToggle(),e.preventDefault())}))}componentDidMount(){this.props.broadcast("taskItemMounted")}render(){const e=T()({"fcn-task__check":!0,"fcn-task__check--checked":this.props.checked,[x]:!0});return n.a.createElement("div",{"aria-checked":this.props.checked,"aria-label":this.props.label,className:e,"data-cue":"discovery-checklist",onKeyDown:this.onKeyDown,role:"checkbox",tabIndex:0,"data-testid":`task-${this.props.number}-checkbox`},this.props.checked&&n.a.createElement(K.a,{"aria-hidden":!0}))}}class TaskItem_TaskItem extends c.PureComponent{constructor(...e){super(...e),Object(d.a)(this,"handleClick",(()=>{this.props.hasCourseContentItemAccess&&this.props.setTask(!this.props.done)}))}render(){const e=T()({"fit-full":!0,"fcn-task":!0,"fcn-task--complete":this.props.done});return n.a.createElement("article",{className:e},n.a.createElement(E.a,{className:S,onClick:this.handleClick},n.a.createElement(E.b,null,n.a.createElement(TaskCheckBox_TaskCheckBox,{broadcast:this.props.broadcast,checked:this.props.done,label:`Task item ${this.props.number}`,onToggle:this.handleClick,number:this.props.number})),n.a.createElement(E.b,{className:C},n.a.createElement("span",{className:"fcn-task__number","data-testid":`task-${this.props.number}`},this.props.number,".")),n.a.createElement(p.a,{text:this.props.text,className:T()(B,I)})),this.props.hint?n.a.createElement(D.a,{hint:this.props.hint}):null)}}var L=Object(o.connect)((e=>({hasCourseContentItemAccess:Object(f.P)(e)})))(TaskItem_TaskItem);class TaskListHeader_TaskListHeader extends n.a.PureComponent{render(){return n.a.createElement("h2",{className:"fit-full fcn-task-header"},this.props.heading)}}var N="tasks__2zeiH_BHmhuJBXUlJC3X0R",H="tasksHelp__2gwNuLZ9kdz9gCp9vw39no";class TaskList_TaskList extends n.a.Component{constructor(...e){super(...e),Object(d.a)(this,"makeTaskItems",(({heading:e,tasks:t},r,s)=>{const a=[];return t.forEach(((e,t)=>{var c;const o=this.props.progress,i=e.done,p=null==o||null===(c=o.checklist)||void 0===c?void 0:c[e.task_key];a.push(n.a.createElement(L,{text:e.text,number:t+1+r,key:`task-${e.task_key}`,hint:e.hint,done:i||Boolean("string"==typeof p?"true"===p:p),broadcast:this.props.broadcast,setTask:e=>{this.props.setTask(s,t,e)}}))})),n.a.createElement("div",{key:`task-criteria-${e}`},a)}))}render(){const e=[];let t=0;return this.props.taskGroups.forEach(((r,s)=>{r.heading&&r.heading.length>0&&e.push(n.a.createElement(TaskListHeader_TaskListHeader,{key:`task-heading-${r.heading}`,heading:r.heading})),e.push(this.makeTaskItems(r,t,s)),t+=r.tasks.length})),n.a.createElement("div",{className:N},n.a.createElement("span",{className:H},"Mark the tasks as complete by checking them off"),e)}}var A=r("45Gz"),U=r("FZcb"),M=r("Xxlx"),G=r("z9go"),Q="group__LspoGf1Fw0-ac_AUnuvRV";function ButtonGroup_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}var Z=Object(o.connect)((e=>({contentIds:Object(f.h)(e)})))((({contentIds:e,project:t,hasNoProgress:r,onStart:s})=>{const a=Object(o.useSelector)(f.P),c=t.slug,i=t.title,p=t.projectInformation.download_path,trackStart=e=>{p&&Object(G.b)("user","email_trigger",function ButtonGroup_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ButtonGroup_ownKeys(Object(r),!0).forEach((function(t){Object(d.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ButtonGroup_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({content_item_name:i,content_item_id:c},e))};return n.a.createElement("div",{className:Q},p&&n.a.createElement(M.a,{data:{content_ids:e,target:"ipp_start_download"},href:p,onClick:()=>trackStart({type:"ipp_start_download"})},n.a.createElement(U.a,{onClick:r?s:void 0,theme:"brand-yellow","data-testid":"download-btn",disabled:!a},"Download")),r&&n.a.createElement(M.a,{data:{content_ids:e,target:"ipp_start_platform"},disableTracking:!p,onClick:()=>trackStart({type:"ipp_start_platform"})},n.a.createElement(U.a,{onClick:s,theme:"brand-yellow","data-testid":"start-btn",disabled:!a},"Start")))}));function useTaskChecklist(e,t){const r=Object(o.useDispatch)(),s=Object(c.useMemo)((()=>{if("project"!==(null==t?void 0:t.type)||null==t||!t.checklist)return;const e=Object.values(t.checklist);return{total:e.length,complete:e.filter((e=>e)).length}}),[t]);return Object(c.useEffect)((()=>{r&&r((({id:e,projectInformation:{self_assessments:t}})=>async(r,s)=>{const a=Object(j.a)(s(),{id:e});if("project"!==(null==a?void 0:a.type))return;const c=project_objectSpread(project_objectSpread({},a),{},{content_item_id:e,checklist:normalizeChecklist(t,a.checklist)});r(Object(O.b)(c))})(e))}),[r,e]),{count:s}}var z={taskHeading:"taskHeading__1JEaVBblmeZBvqgNSR70QO",taskListCounter:"taskListCounter__1ntH11Ojh2_05E78kaz98u"};t.a=({broadcast:e,presenter:{project:t,contentItemTitle:r,contentParentTitle:d,progress:b},modifiers:{assessments:u}})=>{const h=Object(o.useDispatch)(),j=Object(o.useSelector)(f.H),O=useTaskChecklist(t,b).count;Object(l.a)();const k=Object(c.useCallback)((()=>{e("start"),h(startProject(t))}),[e,h,t]),m=d||(null==j?void 0:j.title),_=r||(null==t?void 0:t.title),y={heading:n.a.createElement(P.a,{as:"div",icon:s.a},i.components.brief.objective),content:n.a.createElement(g.a,{contentParentTitle:m,contentItemTitle:_},n.a.createElement(p.a,{text:t.projectInformation.objective}),n.a.createElement(Z,{hasNoProgress:!b.started,onStart:k,project:t})),key:"objective"},E={hidden:!b.started,heading:n.a.createElement(P.a,{icon:a.a,notes:O&&n.a.createElement(A.a,{classNames:{normal:z.taskCounter},total:O.total,complete:O.complete})},i.components.brief.tasks),content:n.a.createElement(TaskList_TaskList,{taskGroups:u,setTask:(e,r,s)=>{const a=u[e].tasks[r];h(updateProjectTaskProgress(t,a.task_key,s))},broadcast:e,progress:b}),key:"selfAssessments"};return n.a.createElement(w.a,{content:[y,E]})}},lOB8:function(e,t,r){"use strict";r.d(t,"a",(function(){return useMeaningfulContentLoaded}));var s=r("q1tI"),a=r("/MKj"),c=r("CWAm");const useMeaningfulContentLoaded=()=>{const e=Object(a.useDispatch)();Object(s.useEffect)((()=>{e&&e(Object(c.d)())}),[e])}}}]);
//# sourceMappingURL=108.4191ebd513c9d39f7367.chunk.js.map